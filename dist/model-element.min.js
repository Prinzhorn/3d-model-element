(function(){'use strict';var a={normalize:(a)=>{let b=new THREE.Box3().setFromObject(a),c=new THREE.Vector3;b.getCenter(a.position),b.getSize(c);let d=1/Math.max(c.x,c.y);return a.position.multiplyScalar(-d),a.scale.set(d,d,d),a},createDebugBoundingBox:()=>{let a=new THREE.LineBasicMaterial({color:65280}),b=new THREE.PlaneGeometry(1,1),c=new THREE.WireframeGeometry(b),d=new THREE.LineSegments(c,a);return d},createContainer:(a)=>{let b=new THREE.Object3D;return!1,b.add(a),b}};var b={getFileExtension:(a)=>{let b=a.split(/[?#]/)[0],c=b.split('/'),d=c.pop(),e=d.split('.');if(0<e.length)return'.'+e.pop()}};const c={},d=(d)=>{let e,f,g=b.getFileExtension(d);if(!g)throw'Unknown object format';if(e=c[g],!e)throw`Unknown object format '${g}'`;return f=e.objectCache[d],f||(f=e.load(d).then((b)=>(a.normalize(b),a.createContainer(b))),e.objectCache[d]=f),f.then((a)=>a.clone())};var e={load:d,register:(a,b)=>{c[a]={load:b,objectCache:{}}}};const f=(a)=>parseFloat(a||0);var g={parseTransformValue:(a,b)=>{var d=a.split(/\s*[(),]\s*/).slice(1,-1);6===d.length?b.set(+d[0],-d[2],0,+d[4],-d[1],+d[3],0,-d[5],0,0,1,0,0,0,0,1):16===d.length?b.set(+d[0],-d[4],+d[8],+d[12],-d[1],+d[5],-d[9],-d[13],+d[2],-d[6],+d[10],+d[14],+d[3],+d[7],+d[11],+d[15]):b.identity()},parseOriginValue:(a,b)=>{let c=a.split(' ');b.set(f(c[0]),f(c[1]),f(c[2]))},parseUnitValue:f};var h={getTransformForElement:(a)=>{let b=new THREE.Matrix4,c=new THREE.Matrix4,d=new THREE.Vector3,e=new THREE.Matrix4,f=new THREE.Vector3,h=a,i=[],j=0,k=0,l=0;if(0===a.offsetWidth||0===a.offsetHeight)return{matrix:b};for(j-=a.offsetWidth/2,k+=a.offsetHeight/2;a;)a===h&&(j+=a.offsetLeft,k+=a.offsetTop,h=a.offsetParent),i.push(a),j-=a.scrollLeft,k-=a.scrollTop,a=a.parentElement;for(b.makeTranslation(j,-k,0);a=i.pop();){let h=getComputedStyle(a),i=h.perspective;if('none'!==i){l=g.parseUnitValue(i);let a=h.perspectiveOrigin;a&&g.parseOriginValue(a,f)}g.parseOriginValue(h.transformOrigin,d),g.parseTransformValue(h.transform,c);let j=d.x-a.offsetWidth/2,k=d.y-a.offsetHeight/2,m=d.z;0!=j||0!=k||0!==m?(b.multiply(e.makeTranslation(j,-k,m)),b.multiply(c),b.multiply(e.makeTranslation(-j,k,-m))):b.multiply(c)}return{matrix:b,perspective:l,perspectiveOrigin:f}}};let i,j,k,l,m,n,o,p;const q=()=>{o=new THREE.Scene,p=new THREE.DirectionalLight(16777215,1),p.position.set(0,0,1),o.add(p),n=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),n.domElement.style.cssText='pointer-events:none;position:fixed;top:0;left:0;',document.documentElement.appendChild(n.domElement)},r=(a)=>{o||(q(),requestAnimationFrame(w)),o.add(a)},s=(a)=>{o.remove(a)},t=()=>{let a=!1;return j=window.innerWidth,k=window.innerHeight,i=null,o.children.forEach((b)=>{let c=b.elem;if(c){let a=c.offsetWidth,d=h.getTransformForElement(c);i||(d.perspective?i=v(d.perspective,d.perspectiveOrigin):i=u()),b.rotation.setFromRotationMatrix(d.matrix),b.position.setFromMatrixPosition(d.matrix),b.scale.setFromMatrixScale(d.matrix),b.scale.multiplyScalar(a),b.position.x+=a-j/2,b.position.y+=k/2}a||(a=!0)}),a},u=()=>{let a;return m||(m=new THREE.OrthographicCamera),a=m,a.left=-j/2,a.right=j/2,a.top=k/2,a.bottom=-k/2,a.far=2e3,a.near=-700,a.updateProjectionMatrix(),a},v=(a,b)=>{let c;l||(l=new THREE.PerspectiveCamera),c=l,c.fov=180*(2*Math.atan(k/2/a))/Math.PI,c.aspect=j/k,c.position.set(0,0,a),c.updateProjectionMatrix();let d=j/2-b.x,e=k/2-b.y;if(0!=d||0!=e){let a=c.projectionMatrix.clone();c.projectionMatrix.makeTranslation(-d/(j/2),e/(k/2),0),c.projectionMatrix.multiply(a),a.makeTranslation(d,-e,0),c.projectionMatrix.multiply(a)}return c},w=()=>{requestAnimationFrame(w),t()&&(n.setSize(j,k),n.render(o,i))};var x={add:r,remove:s,render:w};class y extends HTMLElement{constructor(){super()}static get observedAttributes(){return['src']}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(a,b,c){'src'===a&&e.load(c).then((a)=>{a.elem=this,x.add(a)})}}let z;var A=(a)=>new Promise((b)=>(z||(z=new THREE.OBJLoader),z.load(a,(a)=>{b(a)})));if('customElements'in window){if(!('THREE'in window))throw'THREE (threejs.org) is required.';'OBJLoader'in THREE&&e.register('.obj',A),customElements.define('x-model',y)}})();